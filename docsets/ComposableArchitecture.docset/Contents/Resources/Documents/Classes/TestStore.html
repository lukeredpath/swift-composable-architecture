<!DOCTYPE html>
<html lang="en">
  <head>
    <title>TestStore Class Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset="utf-8">
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
    <script src="../js/lunr.min.js" defer></script>
    <script src="../js/typeahead.jquery.js" defer></script>
    <script src="../js/jazzy.search.js" defer></script>
  </head>
  <body>

    <a name="//apple_ref/swift/Class/TestStore" class="dashAnchor"></a>

    <a title="TestStore Class Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="../index.html">
          ComposableArchitecture Docs
        </a>
         (78% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="../search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="../index.html">ComposableArchitecture Reference</a>
      <img class="carat" src="../img/carat.png" />
      TestStore Class Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/Store.html">Store</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/TestStore.html">TestStore</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/TestStore/Step.html">– Step</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/ViewStore.html">ViewStore</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/ActionFormat.html">ActionFormat</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/CLAuthorizationStatus.html">CLAuthorizationStatus</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/Date.html">Date</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/DispatchQueue.html">DispatchQueue</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/OperationQueue.html">OperationQueue</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/Publisher.html">Publisher</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/Publishers.html">Publishers</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/Publishers.html#/Create">– Create</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/RunLoop.html">RunLoop</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/SFSpeechRecognizerAuthorizationStatus.html">SFSpeechRecognizerAuthorizationStatus</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/URL.html">URL</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/View.html">View</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/CustomDebugOutputConvertible.html">CustomDebugOutputConvertible</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/AlertState.html">AlertState</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/AlertState/Button.html">– Button</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/DebugEnvironment.html">DebugEnvironment</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/Effect.html">Effect</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/Effect/Subscriber.html">– Subscriber</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/ForEachStore.html">ForEachStore</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/Identified.html">Identified</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/IdentifiedArray.html">IdentifiedArray</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/IfLetStore.html">IfLetStore</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/Reducer.html">Reducer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/StorePublisher.html">StorePublisher</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/WithViewStore.html">WithViewStore</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Typealiases.html#/s:22ComposableArchitecture17IdentifiedArrayOfa">IdentifiedArrayOf</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            <h1>TestStore</h1>
              <div class="declaration">
                <div class="language">
                  
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="kt">TestStore</span><span class="o">&lt;</span><span class="kt">State</span><span class="p">,</span> <span class="kt">LocalState</span><span class="p">,</span> <span class="kt">Action</span><span class="p">,</span> <span class="kt">LocalAction</span><span class="p">,</span> <span class="kt">Environment</span><span class="o">&gt;</span> <span class="k">where</span> <span class="kt">Action</span> <span class="p">:</span> <span class="kt">Equatable</span></code></pre>

                </div>
              </div>
            <p>A testable runtime for a reducer.</p>

<p>This object aids in writing expressive and exhaustive tests for features built in the
Composable Architecture. It allows you to send a sequence of actions to the store, and each
step of the way you must assert exactly how state changed, and how effect emissions were fed
back into the system.</p>

<p>There are multiple ways the test store forces you to exhaustively assert on how your feature
behaves:</p>

<ul>
<li>After each action is sent you must describe precisely how the state changed from before the
action was sent to after it was sent.</li>
</ul>

<p>If even the smallest piece of data differs the test will fail. This guarantees that you are
  proving you know precisely how the state of the system changes.</p>

<ul>
<li>Sending an action can sometimes cause an effect to be executed, and if that effect emits an
action that is fed back into the system, you <strong>must</strong> explicitly assert that you expect to
receive that action from the effect, <em>and</em> you must assert how state changed as a result.</li>
</ul>

<p>If you try to send another action before you have handled all effect emissions the assertion
  will fail. This guarantees that you do not accidentally forget about an effect emission, and
  that the sequence of steps you are describing will mimic how the application behaves in
  reality.</p>

<ul>
<li>All effects must complete by the time the assertion has finished running the steps you
specify.</li>
</ul>

<p>If at the end of the assertion there is still an in-flight effect running, the assertion
  will fail. This helps exhaustively prove that you know what effects are in flight and forces
  you to prove that effects will not cause any future changes to your state.</p>

<p>For example, given a simple counter reducer:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">CounterState</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="p">}</span>

<span class="kd">enum</span> <span class="kt">CounterAction</span><span class="p">:</span> <span class="kt">Equatable</span> <span class="p">{</span>
  <span class="k">case</span> <span class="n">decrementButtonTapped</span>
  <span class="k">case</span> <span class="n">incrementButtonTapped</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">counterReducer</span> <span class="o">=</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">CounterState</span><span class="p">,</span> <span class="kt">CounterAction</span><span class="p">,</span> <span class="kt">Void</span><span class="o">&gt;</span> <span class="p">{</span> <span class="n">state</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">_</span> <span class="k">in</span>
  <span class="k">switch</span> <span class="n">action</span> <span class="p">{</span>
  <span class="k">case</span> <span class="o">.</span><span class="nv">decrementButtonTapped</span><span class="p">:</span>
    <span class="n">state</span><span class="o">.</span><span class="n">count</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="o">.</span><span class="k">none</span>

  <span class="k">case</span> <span class="o">.</span><span class="nv">incrementButtonTapped</span><span class="p">:</span>
    <span class="n">state</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="o">.</span><span class="k">none</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>One can assert against its behavior over time:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">CounterTests</span><span class="p">:</span> <span class="kt">XCTestCase</span> <span class="p">{</span>
  <span class="kd">func</span> <span class="nf">testCounter</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">store</span> <span class="o">=</span> <span class="kt">TestStore</span><span class="p">(</span>
      <span class="nv">initialState</span><span class="p">:</span> <span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">count</span><span class="p">:</span> <span class="mi">0</span><span class="p">),</span>  <span class="c1">// GIVEN counter state of 0</span>
      <span class="nv">reducer</span><span class="p">:</span> <span class="n">counterReducer</span><span class="p">,</span>
      <span class="nv">environment</span><span class="p">:</span> <span class="p">()</span>
    <span class="p">)</span>

    <span class="n">store</span><span class="o">.</span><span class="nf">assert</span><span class="p">(</span>
      <span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="o">.</span><span class="n">incrementButtonTapped</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// WHEN the increment button is tapped</span>
        <span class="nv">$0</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>                  <span class="c1">// THEN the count should be 1</span>
      <span class="p">}</span>
    <span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Note that in the trailing closure of <code>.send(.incrementButtonTapped)</code> we are given a single
mutable value of the state before the action was sent, and it is our job to mutate the value
to match the state after the action was sent. In this case the <code>count</code> field changes to <code>1</code>.</p>

<p>For a more complex example, consider the following bare-bones search feature that uses the
<code>.debounce</code> operator to wait for the user to stop typing before making a network request:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">SearchState</span><span class="p">:</span> <span class="kt">Equatable</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">query</span> <span class="o">=</span> <span class="s">""</span>
  <span class="k">var</span> <span class="nv">results</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="p">}</span>

<span class="kd">enum</span> <span class="kt">SearchAction</span><span class="p">:</span> <span class="kt">Equatable</span> <span class="p">{</span>
  <span class="k">case</span> <span class="nf">queryChanged</span><span class="p">(</span><span class="kt">String</span><span class="p">)</span>
  <span class="k">case</span> <span class="nf">response</span><span class="p">([</span><span class="kt">String</span><span class="p">])</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">SearchEnvironment</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">mainQueue</span><span class="p">:</span> <span class="kt">AnySchedulerOf</span><span class="o">&lt;</span><span class="kt">DispatchQueue</span><span class="o">&gt;</span>
  <span class="k">var</span> <span class="nv">request</span><span class="p">:</span> <span class="p">(</span><span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Effect</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">String</span><span class="p">],</span> <span class="kt">Never</span><span class="o">&gt;</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">searchReducer</span> <span class="o">=</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">SearchState</span><span class="p">,</span> <span class="kt">SearchAction</span><span class="p">,</span> <span class="kt">SearchEnvironment</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="n">state</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">environment</span> <span class="k">in</span>

    <span class="kd">struct</span> <span class="kt">SearchId</span><span class="p">:</span> <span class="kt">Hashable</span> <span class="p">{}</span>

    <span class="k">switch</span> <span class="n">action</span> <span class="p">{</span>
    <span class="k">case</span> <span class="kd">let</span> <span class="o">.</span><span class="nf">queryChanged</span><span class="p">(</span><span class="n">query</span><span class="p">):</span>
      <span class="n">state</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">query</span>
      <span class="k">return</span> <span class="n">environment</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">debounce</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="kt">SearchId</span><span class="p">(),</span> <span class="nv">for</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="nv">scheduler</span><span class="p">:</span> <span class="n">environment</span><span class="o">.</span><span class="n">mainQueue</span><span class="p">)</span>

    <span class="k">case</span> <span class="kd">let</span> <span class="o">.</span><span class="nf">response</span><span class="p">(</span><span class="n">results</span><span class="p">):</span>
      <span class="n">state</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="n">results</span>
      <span class="k">return</span> <span class="o">.</span><span class="k">none</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>It can be fully tested by controlling the environment&rsquo;s scheduler and effect:</p>
<pre class="highlight swift"><code><span class="c1">// Create a test dispatch scheduler to control the timing of effects</span>
<span class="k">let</span> <span class="nv">scheduler</span> <span class="o">=</span> <span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">testScheduler</span>

<span class="k">let</span> <span class="nv">store</span> <span class="o">=</span> <span class="kt">TestStore</span><span class="p">(</span>
  <span class="nv">initialState</span><span class="p">:</span> <span class="kt">SearchState</span><span class="p">(),</span>
  <span class="nv">reducer</span><span class="p">:</span> <span class="n">searchReducer</span><span class="p">,</span>
  <span class="nv">environment</span><span class="p">:</span> <span class="kt">SearchEnvironment</span><span class="p">(</span>
    <span class="c1">// Wrap the test scheduler in a type-erased scheduler</span>
    <span class="nv">mainQueue</span><span class="p">:</span> <span class="n">scheduler</span><span class="o">.</span><span class="nf">eraseToAnyScheduler</span><span class="p">(),</span>
    <span class="c1">// Simulate a search response with one item</span>
    <span class="nv">request</span><span class="p">:</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span> <span class="kt">Effect</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="p">[</span><span class="s">"Composable Architecture"</span><span class="p">])</span> <span class="p">}</span>
  <span class="p">)</span>
<span class="p">)</span>
<span class="n">store</span><span class="o">.</span><span class="nf">assert</span><span class="p">(</span>
  <span class="c1">// Change the query</span>
  <span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="o">.</span><span class="nf">searchFieldChanged</span><span class="p">(</span><span class="s">"c"</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Assert that state updates accordingly</span>
    <span class="nv">$0</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="s">"c"</span>
  <span class="p">},</span>

  <span class="c1">// Advance the scheduler by a period shorter than the debounce</span>
  <span class="o">.</span><span class="k">do</span> <span class="p">{</span> <span class="n">scheduler</span><span class="o">.</span><span class="nf">advance</span><span class="p">(</span><span class="nv">by</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">},</span>

  <span class="c1">// Change the query again</span>
  <span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="o">.</span><span class="nf">searchFieldChanged</span><span class="p">(</span><span class="s">"co"</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$0</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="s">"co"</span>
  <span class="p">},</span>

  <span class="c1">// Advance the scheduler by a period shorter than the debounce</span>
  <span class="o">.</span><span class="k">do</span> <span class="p">{</span> <span class="n">scheduler</span><span class="o">.</span><span class="nf">advance</span><span class="p">(</span><span class="nv">by</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">},</span>
  <span class="c1">// Advance the scheduler to the debounce</span>
  <span class="o">.</span><span class="k">do</span> <span class="p">{</span> <span class="n">scheduler</span><span class="o">.</span><span class="nf">advance</span><span class="p">(</span><span class="nv">by</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">},</span>

  <span class="c1">// Assert that the expected response is received</span>
  <span class="o">.</span><span class="nf">receive</span><span class="p">(</span><span class="o">.</span><span class="nf">response</span><span class="p">([</span><span class="s">"Composable Architecture"</span><span class="p">]))</span> <span class="p">{</span>
    <span class="c1">// Assert that state updates accordingly</span>
    <span class="nv">$0</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Composable Architecture"</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">)</span>
</code></pre>

<p>This test is proving that the debounced network requests are correctly canceled when we do not
wait longer than the 0.5 seconds, because if it wasn&rsquo;t and it delivered an action when we did
not expect it would cause a test failure.</p>

          </div>
        </section>

        <section class="section">
          <div class="section-content">
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:22ComposableArchitecture9TestStoreC5scope5state6actionACyxqd__q0_qd_0_q2_Gqd__q_c_q1_qd_0_ctr0_lF"></a>
                    <a name="//apple_ref/swift/Method/scope(state:action:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:22ComposableArchitecture9TestStoreC5scope5state6actionACyxqd__q0_qd_0_q2_Gqd__q_c_q1_qd_0_ctr0_lF">scope(state:<wbr>action:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Scopes a store to assert against more local state and actions.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="n">scope</span><span class="o">&lt;</span><span class="kt">S</span><span class="p">,</span> <span class="kt">A</span><span class="o">&gt;</span><span class="p">(</span>
  <span class="n">state</span> <span class="nv">toLocalState</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">LocalState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">S</span><span class="p">,</span>
  <span class="n">action</span> <span class="nv">fromLocalAction</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">A</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">LocalAction</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">TestStore</span><span class="o">&lt;</span><span class="kt">State</span><span class="p">,</span> <span class="kt">S</span><span class="p">,</span> <span class="kt">Action</span><span class="p">,</span> <span class="kt">A</span><span class="p">,</span> <span class="kt">Environment</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>toLocalState</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>A function that transforms the reducer&rsquo;s state into more local state. This
state will be asserted against as it is mutated by the reducer. Useful for testing view
store state transformations.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>fromLocalAction</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>A function that wraps a more local action in the reducer&rsquo;s action.
Local actions can be &ldquo;sent&rdquo; to the store, while any reducer action may be received.
Useful for testing view store action transformations.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:22ComposableArchitecture9TestStoreC5scope5stateACyxqd__q0_q1_q2_Gqd__q_c_tlF"></a>
                    <a name="//apple_ref/swift/Method/scope(state:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:22ComposableArchitecture9TestStoreC5scope5stateACyxqd__q0_q1_q2_Gqd__q_c_tlF">scope(state:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Scopes a store to assert against more local state.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="n">scope</span><span class="o">&lt;</span><span class="kt">S</span><span class="o">&gt;</span><span class="p">(</span>
  <span class="n">state</span> <span class="nv">toLocalState</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">LocalState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">S</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">TestStore</span><span class="o">&lt;</span><span class="kt">State</span><span class="p">,</span> <span class="kt">S</span><span class="p">,</span> <span class="kt">Action</span><span class="p">,</span> <span class="kt">LocalAction</span><span class="p">,</span> <span class="kt">Environment</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>toLocalState</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>A function that transforms the reducer&rsquo;s state into more local
state. This state will be asserted against as it is mutated by the reducer. Useful for
testing view store state transformations.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:22ComposableArchitecture9TestStoreC4StepV"></a>
                    <a name="//apple_ref/swift/Struct/Step" class="dashAnchor"></a>
                    <a class="token" href="#/s:22ComposableArchitecture9TestStoreC4StepV">Step</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A single step of a <code><a href="../Classes/TestStore.html">TestStore</a></code> assertion.</p>

                        <a href="../Classes/TestStore/Step.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">Step</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Available%20where%20%60State%60%20%3D%3D%20%60LocalState%60%2C%20%60Action%60%20%3D%3D%20%60LocalAction%60"></a>
                <a name="//apple_ref/swift/Section/Available where `State` == `LocalState`, `Action` == `LocalAction`" class="dashAnchor"></a>
                <div class="section-name-container">
                  <a class="section-name-link" href="#/Available%20where%20%60State%60%20%3D%3D%20%60LocalState%60%2C%20%60Action%60%20%3D%3D%20%60LocalAction%60"></a>
                  <h3 class="section-name"><p>Available where <code>State</code> == <code>LocalState</code>, <code>Action</code> == <code>LocalAction</code></p>
</h3>
                </div>
              </div>
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:22ComposableArchitecture9TestStoreCAAq_Rszq1_Rs0_rlE12initialState7reducer11environmentACyxxq0_q0_q2_Gx_AA7ReducerVyxq0_q2_Gq2_tcfc"></a>
                    <a name="//apple_ref/swift/Method/init(initialState:reducer:environment:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:22ComposableArchitecture9TestStoreCAAq_Rszq1_Rs0_rlE12initialState7reducer11environmentACyxxq0_q0_q2_Gx_AA7ReducerVyxq0_q2_Gq2_tcfc">init(initialState:<wbr>reducer:<wbr>environment:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Initializes a test store from an initial state, a reducer, and an initial environment.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">convenience</span> <span class="nf">init</span><span class="p">(</span>
  <span class="nv">initialState</span><span class="p">:</span> <span class="kt">State</span><span class="p">,</span>
  <span class="nv">reducer</span><span class="p">:</span> <span class="kt"><a href="../Structs/Reducer.html">Reducer</a></span><span class="o">&lt;</span><span class="kt">State</span><span class="p">,</span> <span class="kt">Action</span><span class="p">,</span> <span class="kt">Environment</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="nv">environment</span><span class="p">:</span> <span class="kt">Environment</span>
<span class="p">)</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>initialState</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>The state to start the test from.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>reducer</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>A reducer.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>environment</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>The environment to start the test from.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Available%20where%20%60LocalState%60%3A%20%60Equatable%60"></a>
                <a name="//apple_ref/swift/Section/Available where `LocalState`: `Equatable`" class="dashAnchor"></a>
                <div class="section-name-container">
                  <a class="section-name-link" href="#/Available%20where%20%60LocalState%60%3A%20%60Equatable%60"></a>
                  <h3 class="section-name"><p>Available where <code>LocalState</code>: <code>Equatable</code></p>
</h3>
                </div>
              </div>
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:22ComposableArchitecture9TestStoreCAASQR_rlE6assert_4file4lineyAC4StepVyxq_q0_q1_q2__Gd_s12StaticStringVSutF"></a>
                    <a name="//apple_ref/swift/Method/assert(_:file:line:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:22ComposableArchitecture9TestStoreCAASQR_rlE6assert_4file4lineyAC4StepVyxq_q0_q1_q2__Gd_s12StaticStringVSutF">assert(_:<wbr>file:<wbr>line:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Asserts against a script of actions.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">assert</span><span class="p">(</span>
  <span class="n">_</span> <span class="nv">steps</span><span class="p">:</span> <span class="kt"><a href="../Classes/TestStore/Step.html">Step</a></span><span class="o">...</span><span class="p">,</span>
  <span class="nv">file</span><span class="p">:</span> <span class="kt">StaticString</span> <span class="o">=</span> <span class="kd">#file</span><span class="p">,</span>
  <span class="nv">line</span><span class="p">:</span> <span class="kt">UInt</span> <span class="o">=</span> <span class="kd">#line</span>
<span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:22ComposableArchitecture9TestStoreCAASQR_rlE6assert_4file4lineySayAC4StepVyxq_q0_q1_q2__GG_s12StaticStringVSutF"></a>
                    <a name="//apple_ref/swift/Method/assert(_:file:line:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:22ComposableArchitecture9TestStoreCAASQR_rlE6assert_4file4lineySayAC4StepVyxq_q0_q1_q2__GG_s12StaticStringVSutF">assert(_:<wbr>file:<wbr>line:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Asserts against an array of actions.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">assert</span><span class="p">(</span>
  <span class="n">_</span> <span class="nv">steps</span><span class="p">:</span> <span class="p">[</span><span class="kt"><a href="../Classes/TestStore/Step.html">Step</a></span><span class="p">],</span>
  <span class="nv">file</span><span class="p">:</span> <span class="kt">StaticString</span> <span class="o">=</span> <span class="kd">#file</span><span class="p">,</span>
  <span class="nv">line</span><span class="p">:</span> <span class="kt">UInt</span> <span class="o">=</span> <span class="kd">#line</span>
<span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>

      </article>
    </div>
    <section class="footer">
      <p>&copy; 2020 <a class="link" href="" target="_blank" rel="external"></a>. All rights reserved. (Last updated: 2020-07-10)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.5</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
